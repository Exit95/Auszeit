<VirtualHost *:80>
    # Ersetze mit deiner Domain
    ServerName deine-domain.de
    ServerAlias www.deine-domain.de
    
    # Admin E-Mail
    ServerAdmin admin@deine-domain.de
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/testseite-error.log
    CustomLog ${APACHE_LOG_DIR}/testseite-access.log combined
    
    # Proxy-Einstellungen für Node.js App (läuft auf Port 3000)
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:3000/
    ProxyPassReverse / http://127.0.0.1:3000/
    
    # WebSocket Support (falls benötigt)
    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) "ws://127.0.0.1:3000/$1" [P,L]
    
    # Security Headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    
    # Kompression aktivieren
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
    </IfModule>
</VirtualHost>

# SSL-Konfiguration (mit Let's Encrypt)
# Wird automatisch von certbot erstellt, wenn du SSL einrichtest
# Beispiel:
# <VirtualHost *:443>
#     ServerName deine-domain.de
#     ServerAlias www.deine-domain.de
#     
#     SSLEngine on
#     SSLCertificateFile /etc/letsencrypt/live/deine-domain.de/fullchain.pem
#     SSLCertificateKeyFile /etc/letsencrypt/live/deine-domain.de/privkey.pem
#     Include /etc/letsencrypt/options-ssl-apache.conf
#     
#     # Gleiche Proxy-Einstellungen wie oben
#     ProxyPreserveHost On
#     ProxyPass / http://127.0.0.1:3000/
#     ProxyPassReverse / http://127.0.0.1:3000/
#     
#     # ... restliche Konfiguration
# </VirtualHost>

